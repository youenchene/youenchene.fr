<!doctype html><html lang=fr data-theme>
<head>
<meta charset=utf-8>
<meta name=HandheldFriendly content="True">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=referrer content="no-referrer-when-downgrade">
<title>GWT avancé : Event Bus, MVP et Code Splitting - Yet Another Entrepreneur Blog</title>
<meta name=description content="Je suis Youen Chéné, fondateur de Webvert, advisor au Bear Studio. Ici, je parle Web, Sobriété Numérique, Programmation, Entreprenariat, Domotique et Rétrogaming (Amiga).">
<link rel=icon type=image/x-icon href=https://www.youenchene.fr/favicon.ico>
<link rel=apple-touch-icon-precomposed href=https://www.youenchene.fr/favicon.png>
<link rel=stylesheet href=https://www.youenchene.fr/css/style.763b1da7d76c19a13e52f58534caf5a7cac32852f7003989d35b7c560216c561.css integrity="sha256-djsdp9dsGaE+UvWFNMr1p8rDKFL3ADmJ01t8VgIWxWE=">
<meta property="og:title" content="GWT avancé : Event Bus, MVP et Code Splitting">
<meta property="og:description" content="Pour ce début d'année 2010, voici un nouvel article sur l'utilisation de GWT avancé. Cela concerne des techniques de programmation permettant de construire des applications GWT ambitieuse maitrisable (&#34;Large Scale Application&#34;.
Les enjeux
Derrière ces articles techniques, il y a aussi des enjeux commerciaux.
L'impression de vitesse est très importante pour les tous les utilisateurs. Pour Driveo, c'est un critère discriminant dans le choix de la solution par rapports aux concurrents offline.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.youenchene.fr/2010/01/gwt-avance-event-bus-mvp-et-code.html"><meta property="article:section" content="post">
<meta property="article:published_time" content="2010-01-08T09:02:00+00:00">
<meta property="article:modified_time" content="2010-01-08T09:02:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="GWT avancé : Event Bus, MVP et Code Splitting">
<meta name=twitter:description content="Pour ce début d'année 2010, voici un nouvel article sur l'utilisation de GWT avancé. Cela concerne des techniques de programmation permettant de construire des applications GWT ambitieuse maitrisable (&#34;Large Scale Application&#34;.
Les enjeux
Derrière ces articles techniques, il y a aussi des enjeux commerciaux.
L'impression de vitesse est très importante pour les tous les utilisateurs. Pour Driveo, c'est un critère discriminant dans le choix de la solution par rapports aux concurrents offline.">
</head>
<body>
<a class=skip-main href=#main>Skip to main content</a>
<div class=container>
<header class=common-header>
<div class=header-top>
<h1 class=site-title>
<a href=/>Yet Another Entrepreneur Blog</a>
</h1>
<ul class=social-icons>
<li>
<a href=https://twitter.com/youen_chene title=Twitter rel=me>
<span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span>
</a>
</li>
<li>
<a href=https://www.linkedin.com/in/youenchene title=Linkedin rel=me>
<span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span>
</a>
</li>
<li>
<a href=https://github.com/youenchene title=Github rel=me>
<span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span>
</a>
</li>
<li>
<a href=/feed.xml title=Rss rel=me>
<span class=inline-svg><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>
</span>
</a>
</li>
</ul>
</div>
<nav></nav>
<extra>
<p>Je suis Youen Chéné, fondateur de <a href=https://www.lewebvert.fr/ target=_blank>Webvert</a>, advisor au <a href=https://www.bearstudio.fr/ target=_blank>Bear Studio</a>.</p>
<p><em>Ici, je parle Web, Sobriété Numérique, Programmation, Entreprenariat, Domotique et Rétrogaming (Amiga).</em></p>
</extra>
</header>
<main id=main tabindex=-1>
<article class="post h-entry">
<header class=post-header>
<h1 class="p-name post-title">GWT avancé : Event Bus, MVP et Code Splitting</h1>
</header>
<div class="content e-content">
<div class="css-full-post-content js-full-post-content">
<a onblur=try{parent.deselectBloggerImageGracefully()}catch(a){} href=/assets/external/1.bp.blogspot.com/_7LQ1EXHnw30/S0b1PLGcZOI/AAAAAAAADVg/69dv45oE788/s1600-h/toolkit_proposed_icon_128.png><img style="margin:0 10px 10px 0;float:left;cursor:pointer;width:128px;height:128px" src=/assets/external/1.bp.blogspot.com/_7LQ1EXHnw30/S0b1PLGcZOI/AAAAAAAADVg/69dv45oE788/s200/toolkit_proposed_icon_128.png alt id=BLOGGER_PHOTO_ID_5424292442241000674 border=0></a><span style=font-style:italic>Pour ce début d'année 2010, voici un nouvel article sur l'utilisation de GWT avancé. Cela concerne des techniques de programmation permettant de construire des applications <a href=http://code.google.com/webtoolkit/>GWT</a> ambitieuse maitrisable ("Large Scale Application".</span><br><br><span style=font-size:130%><span style=font-weight:700>Les enjeux</span></span><br><br>Derrière ces articles techniques, il y a aussi des enjeux commerciaux.<br><br><span style=font-weight:700>L'impression de vitesse</span> est très importante pour les tous les utilisateurs. Pour <a href=http://www.driveo.fr/>Driveo</a>, c'est un critère discriminant dans le choix de la solution par rapports aux concurrents offline. Cela passe donc par <span style=font-weight:700>la maitrise du premier chargement</span> et donc<span style=font-weight:700> la taille du fichier javascript généré par GWT</span>.<br><br><span style=font-weight:700>L'agilité</span> à corriger, maintenir et à faire évoluer l'application est aussi <span style=font-weight:700>un facteur très différenciateur</span> pour <a href=http://www.driveo.fr/>Driveo</a> par rapport à la <span style=font-weight:700>concurrence offline</span> qui évolue plus lentement. Pour cela, la maintenabilité et la <span style=font-weight:700>maitrise de la croissance</span> d'une application doit passer des<span style=font-weight:700> pratiques de conception</span> le permettant.<br><br><span style=font-weight:700;font-size:130%>Event Bus et MVP</span><br><br>Cette partie est la plus compliquée. Cependant, le paragraphe va être court. En effet, il y a la présentation donnée au <a href=http://www.normandyjug.org/>normandy jug</a> et surtout Google a surtout un article complet dessus.<br><br>Vous trouverez donc <a href=http://www.youenchene.fr/2009/12/normandy-jug-presentation-gwt-avance-et.html>ma présentation au normandyjug</a> qui évoque l'objectif de découplage des composants d'une application.<br><br>Enfin, l'équipe GWT a sortie un tutoriel nommé <a href=http://code.google.com/intl/fr/webtoolkit/doc/latest/tutorial/mvp-architecture.html>Large scale application development and MVP</a>. <a href=http://code.google.com/intl/fr/webtoolkit/doc/latest/tutorial/projects/Contacts.zip>Le code source de l'exemple est même disponible</a>. L'exemple comprend même une utilisation de la gestion de l'historique avec GWT.<br><br>Le code de <a href=http://www.driveo.fr/>Driveo</a> est cours de migration vers ces pratiques (20% sur Bus Events, 10% sur MVP). Les premiers avantage sont une diminution du code et meilleur maitrise de la maintenance.<br><br>Cependant, la migration en mode événementiel est à prendre avec des précautions car cela influence la conception complète de l'application. Il faudra veiller à éviter la prise en compte d'événement en double (par le bus events (nouveau code) et par listener/handler (ancien code)) car la localisation de prise en compte de l'évènement n'est pas la même.<br><br>Enfin, la partie la plus importante est le découplage des modules constituant l'application. Cela va permettre un code splitting plus efficace.<br><br><span style=font-size:130%><span style=font-weight:700>Code Splitting</span><br></span><br>Par le simple ajout de <span style=font-style:italic>GWT.runAsync</span>, dans l'embranchement principale de l'application (le menu, l'accueil, le tableau de bord), il est possible de reporter le chargement de certains modules en fonction du profil de l'utilisateur ou du module (si c'est un module peu fréquemment utilisé).<br><br>Le problème c'est que c'est efficace uniquement si les modules sont correctement découplés. On en revient donc aux pratiques de Bus Events et MVP.<br><br>Heureusement, pour pouvoir analyser ce découplage, l'équipe de GWT a ajouté l'analyse SOYC de votre code (SOYC = Story Of Your Compile). Cela vous permet, entre autre, d'avoir des rapports HTML qui permettent de savoir dans quel bloc de javascript compilés vos classes GWT se trouvent.<br><br>Pour cela, il faut ajouter les arguments " -compileReport -XsoycDetailed extra /path/path/report/application " à votre ligne de compilation. Attention, pour moi, avec ses options la compilation est passé de 9mn à 33mn! Il ne faut donc pas les laisser par défaut.<br><br>Pour conclure voici un graphique d'évolution de la taille de <a href=http://www.driveo.fr/>Driveo</a> (Javascript compilé par GWT + CSS + noyau d'images) :<br><div style=text-align:center><a onblur=try{parent.deselectBloggerImageGracefully()}catch(a){} href=/assets/external/4.bp.blogspot.com/_7LQ1EXHnw30/S0cE6MuqhiI/AAAAAAAADVo/tBtKkWlK4-w/s1600-h/Suivi+%C3%A9vol+Driveo.png><img style="margin:0 auto 10px;display:block;text-align:center;cursor:pointer;width:400px;height:141px" src=/assets/external/4.bp.blogspot.com/_7LQ1EXHnw30/S0cE6MuqhiI/AAAAAAAADVo/tBtKkWlK4-w/s400/Suivi+%C3%A9vol+Driveo.png alt id=BLOGGER_PHOTO_ID_5424309674086925858 border=0></a><span style=font-size:85%><span style=font-style:italic>Cliquez sur l'image pour voir les détails</span><br></span></div>
</div>
</div>
<div class=post-info>
<div class="post-date dt-published">2010-01-08</div>
<a class="post-hidden-url u-url" href=https://www.youenchene.fr/2010/01/gwt-avance-event-bus-mvp-et-code.html>https://www.youenchene.fr/2010/01/gwt-avance-event-bus-mvp-et-code.html</a>
<a href=https://www.youenchene.fr class="p-name p-author post-hidden-author h-card" rel=me>map[image://lh5.googleusercontent.com/-A-K28QrsbqY/AAAAAAAAAAI/AAAAAAAAoeE/WxTOlDCDJDU/s512-c/photo.jpg name:Youen Chene url:https://plus.google.com/102338778856350576971?rel=author]</a>
<div class=post-taxonomies>
<ul class=post-categories>
<li><a href=https://www.youenchene.fr/categories/>java</a></li>
<li><a href=https://www.youenchene.fr/categories/>GWT</a></li>
<li><a href=https://www.youenchene.fr/categories/>driveo</a></li>
</ul>
</div>
</div>
</article>
<div class="pagination post-pagination">
<div class="left pagination-item">
<a href=/2010/01/5eme-reunion-du-normandy-jug-jee-6-et.html>5ème réunion du Normandy JUG : JEE 6 et Glassfish</a>
</div>
<div class="right pagination-item">
<a href=/2010/01/cinquieme-reunion-du-normandyjug-java.html>Cinquième réunion du NormandyJUG : Java EE 6 et Glassfish V3</a>
</div>
</div>
</main>
<footer class=common-footer>
<div class=common-footer-bottom>
<div class=copyright>
<p>© Youen Chéné, 2022<br>
Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br>
</p>
</div>
<div id=label-dark style=display:none>
<a href=https://www.lewebvert.fr/label/f5dc16b5-aca4-4bd1-a4a4-ad7284941ea0/ target=_blank><img src=https://www.lewebvert.fr/label/f5dc16b5-aca4-4bd1-a4a4-ad7284941ea0/f5dc16b5-aca4-4bd1-a4a4-ad7284941ea0-dark.svg alt="Score: A - Audit Diagnostic Performance Energétique web réalisé par Webvert" width=87 height=75></a>
</div>
<div id=label-light style=display:block>
<a href=https://www.lewebvert.fr/label/f5dc16b5-aca4-4bd1-a4a4-ad7284941ea0/ target=_blank><img src=https://www.lewebvert.fr/label/f5dc16b5-aca4-4bd1-a4a4-ad7284941ea0/f5dc16b5-aca4-4bd1-a4a4-ad7284941ea0-light.svg alt="Score: A - Audit Diagnostic Performance Energétique web réalisé par Webvert" width=87 height=75></a>
</div>
<button class=theme-switcher>
Dark theme
</button>
<script>const STORAGE_KEY='user-color-scheme',defaultTheme="light";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia('(prefers-color-scheme: dark)');const autoChangeScheme=a=>{currentTheme=a.matches?'dark':'light',document.documentElement.setAttribute('data-theme',currentTheme),changeButtonText()};document.addEventListener('DOMContentLoaded',function(){switchButton=document.querySelector('.theme-switcher'),currentTheme=detectCurrentScheme(),currentTheme=='dark'&&document.documentElement.setAttribute('data-theme','dark'),currentTheme=='auto'&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),currentTheme=='dark'?(document.getElementById('label-light').style.display='none',document.getElementById('label-dark').style.display='block'):(document.getElementById('label-light').style.display='block',document.getElementById('label-dark').style.display='none'),changeButtonText(),switchButton.addEventListener('click',switchTheme,!1)});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light':'light'}function changeButtonText(){switchButton.textContent=currentTheme=='dark'?"Light theme":"Dark theme"}function switchTheme(a){currentTheme=='dark'?(localStorage.setItem(STORAGE_KEY,'light'),document.documentElement.setAttribute('data-theme','light'),currentTheme='light',document.getElementById('label-light').style.display='block',document.getElementById('label-dark').style.display='none'):(localStorage.setItem(STORAGE_KEY,'dark'),document.documentElement.setAttribute('data-theme','dark'),currentTheme='dark',document.getElementById('label-dark').style.display='block',document.getElementById('label-light').style.display='none'),changeButtonText()}</script>
</div>
<p class="h-card vcard">
<a href=https://www.youenchene.fr class="p-name u-url url fn" rel=me>Youen Chéné</a>
</p>
</footer>
</div>
</body>
</html>